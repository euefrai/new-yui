# Render Blueprint â€” deploy da Yui como Web Service
# https://render.com/docs/blueprint-spec

services:
  - type: web
    name: yui
    runtime: python

    buildCommand: |
      pip install -r requirements.txt
      python scripts/minify_static.py
    # 1 worker para evitar OOM no plano gratuito; timeout alto para streaming da IA
    startCommand: gunicorn --workers 1 --threads 2 --timeout 300 --bind 0.0.0.0:$PORT web_server:app

    envVars:
      - key: OPENAI_API_KEY
        sync: false
      - key: OPENAI_MODEL
        value: gpt-4o-mini
      - key: USE_MINIFIED_STATIC
        value: "true"
